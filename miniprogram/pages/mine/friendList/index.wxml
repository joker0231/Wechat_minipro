<!--pages/mine/friendList/index.wxml-->
<view>
  <view class="friendList-navigation">
    <text bindtap="navSwitch" data-index="0" class="{{navState==0 ? 'navswitch-style':''}}">老师</text>
    <text bindtap="navSwitch" data-index="1" class="{{navState==1 ? 'navswitch-style':''}}">同学</text>
  </view>
  <scroll-view class="friendList-container">
    <view wx:for="{{msg}}" wx:key="index">
      <view class="item" bindtap="contactsClick" data-conversationid="{{item.conversationID}}" data-name="{{item.userProfile.nick}}" data-avatar="{{item.userProfile.avatar}}">
        <image src="{{item.userProfile.avatar ? item.userProfile.avatar : 'https://6c65-lemon-7glhwqyu5304e1f9-1311072024.tcb.qcloud.la/logo.png?sign=e05d50a04eece6d1a5032d7cf44efb3e&t=1654361633'}}" class="avatar"></image>
        <view class="right">
          <view class="name">{{item.userProfile.nick}}</view>
          <view class="text" wx:if="{{item.lastMessage.type != 'TIMCustomElem'}}">{{item.lastMessage.payload.text}}</view>
          <view class="text" wx:if="{{item.lastMessage.type == 'TIMCustomElem'}}">{{item.lastMessage.payload.data.title || item.lastMessage.payload.description}}<text style="padding-left: 10rpx">{{item.lastMessage.payload.data.price || item.lastMessage.payload.extension}}元/m²·月</text></view>
        </view>
        <view class="time">{{filter.getDateDiff(item.lastMessage.lastTime, now)}}</view>
        <view class="unreadCount" wx:if="{{item.unreadCount > 0}}">{{item.unreadCount * 1 > 99 ? '99+' : item.unreadCount}}</view>
      </view>
    </view>

    <view wx:if="{{ empty_show }}" class="empty">
      <view class="empty_text">暂无聊天记录~</view>
    </view>
  </scroll-view>
</view>